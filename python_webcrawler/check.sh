#!/usr/bin/bash

#Downloading files from vx-heaven
# arr=($(awk -F ',' '{print $2}' output/links.csv))
# for key in "${arr[@]}"
# do
#     #file endings are inconsistent => update based on ending 
#     key2=${key::-1}

#     wget --directory download $key2
#     # echo $key
# done

# Creating executables
malware=($(ls download/))
cd executables
for key in "${malware[@]}"
do
    # echo $key
    # 7za e '../download/'$key -p'infected'
    var=${key::-3}
    grep $var ../output/links.csv | awk -F "," '{print $1}' >> ../output/families.csv
    # file $var | awk -F " " '{print $2}'
    #Depending on next step
done